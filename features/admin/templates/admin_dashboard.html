<h1>Admin Dashboard</h1>
<table>
    <thead>
        <tr>
            <th>User</th>
            <th>Roles</th>
            <th>Add Role</th>
            <th>Remove Role</th>
        </tr>
    </thead>
    <tbody>
    {% for user in users %}
        <tr>
            <td>{{ user.anonymized_email }}</td>
            <td>
                {% for role in user.roles %}
                    {{ role.name }}{% if not loop.last %}, {% endif %}
                {% endfor %}
            </td>
            <td>
                <form method="post" action="{{ url_for('admin.add_role_to_user', user_id=user.id) }}">
                    <select name="role_id">
                        {% for role in roles %}
                            <option value="{{ role.id }}">{{ role.name }}</option>
                        {% endfor %}
                    </select>
                    <button type="submit">Add</button>
                </form>
            </td>
            <td>
                <form method="post" action="{{ url_for('admin.remove_role_from_user', user_id=user.id) }}">
                    <select name="role_id">
                        {% for role in user.roles %}
                            <option value="{{ role.id }}">{{ role.name }}</option>
                        {% endfor %}
                    </select>
                    <button type="submit">Remove</button>
                </form>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>